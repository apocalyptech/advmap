Game savefile format, binaryish
The string format is kind of dumb; personally I just wanted to have the size first,
followed by the string, but then I wanted to patch my local magic(4) file to
recognize 'em, which will only really process NULL-terminated strings, so I put in
the NULL byte as well.  C'est la vie.

Datatypes:

# int4
% short (int2)
$ string, int2 size followed by the actual string (null terminated, size does not include the NULL)
& char (unsigned)
| char bitfield

The file:

ADVMAP (first six bytes, identifier)
% Savefile version number (3)
$ Game Name
% Number of Maps

Then groups of Maps, for each map:
  $ Map Name
  & Width
  & Height
  % Number of active rooms
  % Number of connections between rooms
  % Number of room groups

  Followed by groups of rooms, for each room:
    % Room ID
    & x
    & y
    $ Room Name
    & Room type
        0: Normal
        1: Green Highlight
        2: Label
        3: Blue Highlight
        4: Red Highlight
        5: Faint
        6: Yellow Highlight
        7: Purple Highlight
        8: Cyan Highlight
        9: Dark
    $ up
    $ down
    $ in
    $ out
    $ Notes
    | flags:
        00000001 = y is offset
        00000010 = x is offset
    | loopbacks: (v3)
        00000001 = N (v3)
        00000010 = NE (v3)
        00000100 = E (v3)
        00001000 = SE (v3)
        00010000 = S (v3)
        00100000 = SW (v3)
        01000000 = W (v3)
        10000000 = NW (v3)

  Followed by groups of Connections, for each conn:
    % Room 1 ID
    & Room 1 Direction
    % Room 2 ID
    & Room 2 Direction
    & Connection Type:
        0 = Regular
        1 = Ladder
        2 = Dotted
    & Passage: (v2)
        0 = Two-way (v2)
        1 = One-way (to Room 1) (v2)
        2 = One-way (to Room 2) (v2)
    & Render Type: (v4)
        0 = Regular (v4)
        1 = Midpoint A (v4)
        2 = Midpoint B (v4)

  Followed by however many room groups.  For each group:
  % Number of rooms in group
  one % for each room ID

----

Version history:

v1 - Various rolling changes
v2 - Added Connection "passage" field
v3 - Added loopback information for rooms
v4 - Added Connection "render type" field
